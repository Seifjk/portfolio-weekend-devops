flowchart LR
    classDef header fill:none,stroke:none,font-size:22px,font-weight:bold,text-align:center
    title["CI/CD â€“ Zero-Downtime Pipeline"]:::header

    subgraph Dev
        dev["<img src='https://api.iconify.design/fa6-solid/user-gear.svg' width='32'> <br/>Developer push"]
    end

    subgraph GitLab["<img src='https://api.iconify.design/logos/gitlab.svg' width='36'> <br/>GitLab CI"]
        runner["Runner"]
        stages["Build<br/>Test<br/>Scan"]
    end

    subgraph Argo["<img src='https://api.iconify.design/logos/argocd-icon.svg' width='36'> <br/>ArgoCD"]
        sync["Sync"]
        rollout["Blue/Green<br/>Rollout"]
    end

    subgraph K8s["<img src='https://api.iconify.design/logos/kubernetes.svg' width='36'> <br/>Prod Cluster"]
        svc["Service"]
        v1["Pod v1"]
        v2["Pod v2"]
    end

    subgraph Obs["<img src='https://api.iconify.design/mdi/chart-line.svg' width='34'> <br/>Observability"]
        graf["<img src='https://api.iconify.design/logos/grafana.svg' width='32'><br/>Grafana"]
        prom["<img src='https://api.iconify.design/logos/prometheus.svg' width='32'><br/>Prometheus"]
        loki["<img src='https://api.iconify.design/logos/loki.svg' width='32'><br/>Loki"]
    end

    dev --> runner --> stages --> sync --> rollout --> svc
    svc -->|traffic| v1 & v2
    v1 & v2 --> prom --> graf
    v1 & v2 --> loki
